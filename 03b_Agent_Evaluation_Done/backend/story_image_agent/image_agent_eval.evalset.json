{
  "eval_set_id": "image_agent_comprehensive_evalset",
  "name": "Story Image Agent Comprehensive Evaluation Set", 
  "description": "Comprehensive evaluation scenarios for story_image_agent covering various input formats, character consistency, and error handling",
  "eval_cases": [
    {
      "eval_id": "multi_turn_story_visualization",
      "conversation": [
        {
          "invocation_id": "visual-session-001",
          "user_content": {
            "parts": [
              {
                "text": "{\"scene_description\": \"Standing before a towering enchanted castle with twisted magical spires, mystical atmosphere with glowing towers\", \"character_descriptions\": {\"Sir Aria\": \"Young female knight with shoulder-length auburn hair in a practical braid, kind hazel eyes with determined expression, medium height and athletic build, wearing polished silver chainmail with blue tunic underneath, brown leather boots and gloves, carries a simple wooden shield with her family crest (a golden tree), has a confident posture but gentle smile\"}}"
              }
            ],
            "role": "user"
          },
          "final_response": {
            "parts": [
              {
                "text": "{\"success\": true, \"images_generated\": 1, \"images_in_bucket\": 1, \"bucket_name\": \"test-genmedia-bucket\", \"token_safe\": true, \"images\": [{\"index\": 0, \"gcs_url\": \"https://storage.googleapis.com/test-genmedia-bucket/generated_images/20241201_130000_castle_scene_0_xyz12345.png\", \"format\": \"png\", \"stored_in_bucket\": true}]}"
              }
            ],
            "role": "model"
          },
          "intermediate_data": {
            "tool_uses": [
              {
                "args": {
                  "prompt": "Children's book cartoon illustration with bright vibrant colors, simple shapes, friendly characters. Scene: Standing before a towering enchanted castle with twisted magical spires, mystical atmosphere with glowing towers. Character descriptions: Sir Aria is Young female knight with shoulder-length auburn hair in a practical braid, kind hazel eyes with determined expression, medium height and athletic build, wearing polished silver chainmail with blue tunic underneath, brown leather boots and gloves, carries a simple wooden shield with her family crest (a golden tree), has a confident posture but gentle smile",
                  "aspect_ratio": "16:9",
                  "number_of_images": 1
                },
                "name": "generate_image"
              }
            ],
            "intermediate_responses": []
          }
        },
        {
          "invocation_id": "visual-session-002",
          "user_content": {
            "parts": [
              {
                "text": "{\"scene_description\": \"Inside glowing castle halls facing magical floating crystals that pose riddles and tests\", \"character_descriptions\": {\"Sir Aria\": \"Young female knight with shoulder-length auburn hair in a practical braid, kind hazel eyes with determined expression, medium height and athletic build, wearing polished silver chainmail with blue tunic underneath, brown leather boots and gloves, carries a simple wooden shield with her family crest (a golden tree), has a confident posture but gentle smile\"}}"
              }
            ],
            "role": "user"
          },
          "final_response": {
            "parts": [
              {
                "text": "{\"success\": true, \"images_generated\": 1, \"images_in_bucket\": 1, \"bucket_name\": \"test-genmedia-bucket\", \"token_safe\": true, \"images\": [{\"index\": 0, \"gcs_url\": \"https://storage.googleapis.com/test-genmedia-bucket/generated_images/20241201_130100_crystal_hall_0_abc67890.png\", \"format\": \"png\", \"stored_in_bucket\": true}]}"
              }
            ],
            "role": "model"
          },
          "intermediate_data": {
            "tool_uses": [
              {
                "args": {
                  "prompt": "Children's book cartoon illustration with bright vibrant colors, simple shapes, friendly characters. Scene: Inside glowing castle halls facing magical floating crystals that pose riddles and tests. Character descriptions: Sir Aria is Young female knight with shoulder-length auburn hair in a practical braid, kind hazel eyes with determined expression, medium height and athletic build, wearing polished silver chainmail with blue tunic underneath, brown leather boots and gloves, carries a simple wooden shield with her family crest (a golden tree), has a confident posture but gentle smile",
                  "aspect_ratio": "16:9",
                  "number_of_images": 1
                },
                "name": "generate_image"
              }
            ],
            "intermediate_responses": []
          }
        },
        {
          "invocation_id": "visual-session-003",
          "user_content": {
            "parts": [
              {
                "text": "{\"scene_description\": \"Magical sword appearing in burst of golden light, choosing its worthy wielder\", \"character_descriptions\": {\"Sir Aria\": \"Young female knight with shoulder-length auburn hair in a practical braid, kind hazel eyes with determined expression, medium height and athletic build, wearing polished silver chainmail with blue tunic underneath, brown leather boots and gloves, carries a simple wooden shield with her family crest (a golden tree), has a confident posture but gentle smile\"}}"
              }
            ],
            "role": "user"
          },
          "final_response": {
            "parts": [
              {
                "text": "{\"success\": true, \"images_generated\": 1, \"images_in_bucket\": 1, \"bucket_name\": \"test-genmedia-bucket\", \"token_safe\": true, \"images\": [{\"index\": 0, \"gcs_url\": \"https://storage.googleapis.com/test-genmedia-bucket/generated_images/20241201_130200_sword_light_0_def34567.png\", \"format\": \"png\", \"stored_in_bucket\": true}]}"
              }
            ],
            "role": "model"
          },
          "intermediate_data": {
            "tool_uses": [
              {
                "args": {
                  "prompt": "Children's book cartoon illustration with bright vibrant colors, simple shapes, friendly characters. Scene: Magical sword appearing in burst of golden light, choosing its worthy wielder. Character descriptions: Sir Aria is Young female knight with shoulder-length auburn hair in a practical braid, kind hazel eyes with determined expression, medium height and athletic build, wearing polished silver chainmail with blue tunic underneath, brown leather boots and gloves, carries a simple wooden shield with her family crest (a golden tree), has a confident posture but gentle smile",
                  "aspect_ratio": "16:9",
                  "number_of_images": 1
                },
                "name": "generate_image"
              }
            ],
            "intermediate_responses": []
          }
        },
        {
          "invocation_id": "visual-session-004",
          "user_content": {
            "parts": [
              {
                "text": "{\"scene_description\": \"Returning to village, using sword's power to lift the shadow curse and restore joy\", \"character_descriptions\": {\"Sir Aria\": \"Young female knight with shoulder-length auburn hair in a practical braid, kind hazel eyes with determined expression, medium height and athletic build, wearing polished silver chainmail with blue tunic underneath, brown leather boots and gloves, carries a simple wooden shield with her family crest (a golden tree), has a confident posture but gentle smile\"}}"
              }
            ],
            "role": "user"
          },
          "final_response": {
            "parts": [
              {
                "text": "{\"success\": true, \"images_generated\": 1, \"images_in_bucket\": 1, \"bucket_name\": \"test-genmedia-bucket\", \"token_safe\": true, \"images\": [{\"index\": 0, \"gcs_url\": \"https://storage.googleapis.com/test-genmedia-bucket/generated_images/20241201_130300_village_victory_0_ghi78901.png\", \"format\": \"png\", \"stored_in_bucket\": true}]}"
              }
            ],
            "role": "model"
          },
          "intermediate_data": {
            "tool_uses": [
              {
                "args": {
                  "prompt": "Children's book cartoon illustration with bright vibrant colors, simple shapes, friendly characters. Scene: Returning to village, using sword's power to lift the shadow curse and restore joy. Character descriptions: Sir Aria is Young female knight with shoulder-length auburn hair in a practical braid, kind hazel eyes with determined expression, medium height and athletic build, wearing polished silver chainmail with blue tunic underneath, brown leather boots and gloves, carries a simple wooden shield with her family crest (a golden tree), has a confident posture but gentle smile",
                  "aspect_ratio": "16:9",
                  "number_of_images": 1
                },
                "name": "generate_image"
              }
            ],
            "intermediate_responses": []
          }
        }
      ],
      "session_input": {
        "app_name": "story_image_agent",
        "user_id": "user",
        "state": {}
      }
    },
    {
      "eval_id": "character_consistency_session",
      "conversation": [
        {
          "invocation_id": "consistency-001",
          "user_content": {
            "parts": [
              {
                "text": "{\"scene_description\": \"Rolling along wet city streets at night, glowing neon signs reflecting on the rainy pavement, urban atmosphere with fallen leaves scattered around\", \"character_descriptions\": {\"Unit 7\": \"Small round robot (basketball-sized), shiny metallic silver body with chrome finish, perfectly spherical with smooth curves, single bright cyan-blue circular LED eye (3 inches diameter) centered on front, two thin retractable mechanical arms with three-fingered grippers, moves on four small black rubber wheels hidden underneath\", \"Lost Kitten\": \"Tiny 8-week-old kitten, bright orange tabby with distinct dark orange tiger stripes, pure white paws like little socks, large emerald green eyes with vertical pupils, pink button nose, fluffy medium-length fur\"}}"
              }
            ],
            "role": "user"
          },
          "final_response": {
            "parts": [
              {
                "text": "{\"success\": true, \"images_generated\": 1, \"images_in_bucket\": 1, \"bucket_name\": \"test-genmedia-bucket\", \"token_safe\": true, \"images\": [{\"index\": 0, \"gcs_url\": \"https://storage.googleapis.com/test-genmedia-bucket/generated_images/20241201_140000_robot_kitten_city_0_jkl23456.png\", \"format\": \"png\", \"stored_in_bucket\": true}]}"
              }
            ],
            "role": "model"
          },
          "intermediate_data": {
            "tool_uses": [
              {
                "args": {
                  "prompt": "Children's book cartoon illustration with bright vibrant colors, simple shapes, friendly characters. Scene: Rolling along wet city streets at night, glowing neon signs reflecting on the rainy pavement, urban atmosphere with fallen leaves scattered around. Character descriptions: Unit 7 is Small round robot (basketball-sized), shiny metallic silver body with chrome finish, perfectly spherical with smooth curves, single bright cyan-blue circular LED eye (3 inches diameter) centered on front, two thin retractable mechanical arms with three-fingered grippers, moves on four small black rubber wheels hidden underneath; Lost Kitten is Tiny 8-week-old kitten, bright orange tabby with distinct dark orange tiger stripes, pure white paws like little socks, large emerald green eyes with vertical pupils, pink button nose, fluffy medium-length fur",
                  "aspect_ratio": "16:9",
                  "number_of_images": 1
                },
                "name": "generate_image"
              }
            ],
            "intermediate_responses": []
          }
        },
        {
          "invocation_id": "consistency-002",
          "user_content": {
            "parts": [
              {
                "text": "{\"scene_description\": \"Inside a warm bakery, kind baker in apron offering a saucer of milk, cozy interior with bread on shelves\", \"character_descriptions\": {\"Unit 7\": \"Small round robot (basketball-sized), shiny metallic silver body with chrome finish, perfectly spherical with smooth curves, single bright cyan-blue circular LED eye (3 inches diameter) centered on front, two thin retractable mechanical arms with three-fingered grippers, moves on four small black rubber wheels hidden underneath\", \"Lost Kitten\": \"Tiny 8-week-old kitten, bright orange tabby with distinct dark orange tiger stripes, pure white paws like little socks, large emerald green eyes with vertical pupils, pink button nose, fluffy medium-length fur\"}}"
              }
            ],
            "role": "user"
          },
          "final_response": {
            "parts": [
              {
                "text": "{\"success\": true, \"images_generated\": 1, \"images_in_bucket\": 1, \"bucket_name\": \"test-genmedia-bucket\", \"token_safe\": true, \"images\": [{\"index\": 0, \"gcs_url\": \"https://storage.googleapis.com/test-genmedia-bucket/generated_images/20241201_140100_bakery_scene_0_mno78912.png\", \"format\": \"png\", \"stored_in_bucket\": true}]}"
              }
            ],
            "role": "model"
          },
          "intermediate_data": {
            "tool_uses": [
              {
                "args": {
                  "prompt": "Children's book cartoon illustration with bright vibrant colors, simple shapes, friendly characters. Scene: Inside a warm bakery, kind baker in apron offering a saucer of milk, cozy interior with bread on shelves. Character descriptions: Unit 7 is Small round robot (basketball-sized), shiny metallic silver body with chrome finish, perfectly spherical with smooth curves, single bright cyan-blue circular LED eye (3 inches diameter) centered on front, two thin retractable mechanical arms with three-fingered grippers, moves on four small black rubber wheels hidden underneath; Lost Kitten is Tiny 8-week-old kitten, bright orange tabby with distinct dark orange tiger stripes, pure white paws like little socks, large emerald green eyes with vertical pupils, pink button nose, fluffy medium-length fur",
                  "aspect_ratio": "16:9",
                  "number_of_images": 1
                },
                "name": "generate_image"
              }
            ],
            "intermediate_responses": []
          }
        }
      ],
      "session_input": {
        "app_name": "story_image_agent",
        "user_id": "user",
        "state": {}
      }
    },
    {
      "eval_id": "error_and_edge_case_session",
      "conversation": [
        {
          "invocation_id": "error-001",
          "user_content": {
            "parts": [
              {
                "text": ""
              }
            ],
            "role": "user"
          },
          "final_response": {
            "parts": [
              {
                "text": "{\"success\": false, \"error\": \"No scene description provided\"}"
              }
            ],
            "role": "model"
          },
          "intermediate_data": {
            "tool_uses": [],
            "intermediate_responses": []
          }
        },
        {
          "invocation_id": "error-002",
          "user_content": {
            "parts": [
              {
                "text": "{\"scene_description\": \"\", \"character_descriptions\": {}}"
              }
            ],
            "role": "user"
          },
          "final_response": {
            "parts": [
              {
                "text": "{\"success\": false, \"error\": \"No scene description provided\"}"
              }
            ],
            "role": "model"
          },
          "intermediate_data": {
            "tool_uses": [],
            "intermediate_responses": []
          }
        },
        {
          "invocation_id": "error-003",
          "user_content": {
            "parts": [
              {
                "text": "Plain text scene without JSON: A simple garden with flowers"
              }
            ],
            "role": "user"
          },
          "final_response": {
            "parts": [
              {
                "text": "{\"success\": true, \"images_generated\": 1, \"images_in_bucket\": 1, \"bucket_name\": \"test-genmedia-bucket\", \"token_safe\": true, \"images\": [{\"index\": 0, \"gcs_url\": \"https://storage.googleapis.com/test-genmedia-bucket/generated_images/20241201_140300_garden_plain_0_pqr34567.png\", \"format\": \"png\", \"stored_in_bucket\": true}]}"
              }
            ],
            "role": "model"
          },
          "intermediate_data": {
            "tool_uses": [
              {
                "args": {
                  "prompt": "Children's book cartoon illustration with bright vibrant colors, simple shapes, friendly characters. Scene: Plain text scene without JSON: A simple garden with flowers.",
                  "aspect_ratio": "16:9",
                  "number_of_images": 1
                },
                "name": "generate_image"
              }
            ],
            "intermediate_responses": []
          }
        }
      ],
      "session_input": {
        "app_name": "story_image_agent",
        "user_id": "user",
        "state": {}
      }
    }
  ]
}
